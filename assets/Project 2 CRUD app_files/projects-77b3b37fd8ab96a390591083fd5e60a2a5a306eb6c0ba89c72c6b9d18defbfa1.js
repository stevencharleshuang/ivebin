define("github/project-cards-filter",["exports","./history","./typecast"],function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=e[t];return n||(n={tokenFilters:[],matchIfMissing:!1},e[t]=n),n}function a(e,t,n){var r=e.tokenFilters.find(function(e){return e.token===t});r?r.negated=n:e.tokenFilters.push({token:t,negated:n}),e.matchIfMissing=!1}function i(e){var t=e.match(C)||[],n={},r=function(e){var t=b.find(function(t){return e.match(new RegExp("^-?"+t+":.*"))});if(t){var r=e.replace(new RegExp("-?"+t+':|"',"g"),"");if(r.length>0){var i=o(n,t),u=e.startsWith("-");a(i,r,u)}}else{var s=L.find(function(t){return e==="no:"+t});if(s)o(n,s).matchIfMissing=!0;else if(e.length>0){var c=o(n,"title");a(c,e,!1)}}},i=!0,u=!1,s=void 0;try{for(var c,l=t[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var d=c.value;r(d)}}catch(m){u=!0,s=m}finally{try{!i&&l["return"]&&l["return"]()}finally{if(u)throw s}}return n}function u(e,t){for(var n in t){var r=e.getAttribute("data-card-"+n)||"",o=[];""!==r.trim()&&(o=JSON.parse(r));var a=t[n];if(a.matchIfMissing){if(o.length>0)return!1}else{var i=!0,u=!1,l=void 0;try{for(var d,m=a.tokenFilters[Symbol.iterator]();!(i=(d=m.next()).done);i=!0){var f=d.value;if("title"===n){if(!s(f.token,o))return!1}else{var v=c(f.token,o);if(f.negated){if(v&&o.length>0)return!1}else if(!v)return!1}}}catch(p){u=!0,l=p}finally{try{!i&&m["return"]&&m["return"]()}finally{if(u)throw l}}}}return!0}function s(e,t){return t.some(function(t){return t.startsWith(e)})}function c(e,t){return-1!==t.indexOf(e)}function l(e,n){var r=new URL(window.location.toString()),o=new URLSearchParams(r.search.slice(1));""===n?o["delete"](e):o.set(e,n),r.search=o.toString(),t.replaceState(t.getState(),document.title,r.toString())}function d(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=document.querySelectorAll(".js-project-fullscreen-link")[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var u=a.value,s=new URL(u.getAttribute("href")||"",window.location.origin),c=new URLSearchParams(s.search.slice(1));""===t?c["delete"](e):c.set(e,t),s.search=c.toString(),u.setAttribute("href",s.toString())}}catch(l){r=!0,o=l}finally{try{!n&&i["return"]&&i["return"]()}finally{if(r)throw o}}}function m(){var e=document.querySelector(".js-card-filter-input");if(e instanceof HTMLInputElement){var t=y["default"](document.querySelector(".js-project-columns-container"),HTMLElement),n=e.value.trim().toLowerCase(),r=i(n),o=!0,a=!1,s=void 0;try{for(var c,m=t.querySelectorAll(".js-project-column-card")[Symbol.iterator]();!(o=(c=m.next()).done);o=!0){var f=c.value,v=u(f,r);if(!v){var p=!0,h=!1,j=void 0;try{for(var g,b=f.querySelectorAll(".js-issue-note, .js-issue-note-reference")[Symbol.iterator]();!(p=(g=b.next()).done);p=!0){var L=g.value;if(v=u(L,r))break}}catch(C){h=!0,j=C}finally{try{!p&&b["return"]&&b["return"]()}finally{if(h)throw j}}}f.classList.toggle("d-none",!v)}}catch(C){a=!0,s=C}finally{try{!o&&m["return"]&&m["return"]()}finally{if(a)throw s}}var T=!0,E=!1,S=void 0;try{for(var k,x=t.querySelectorAll(".js-project-column")[Symbol.iterator]();!(T=(k=x.next()).done);T=!0){var w=k.value,M=y["default"](w.querySelector(".js-filtered-column-card-count"),HTMLElement);if(n.length>0){var q=w.querySelectorAll(".js-project-column-card:not(.d-none)").length,H=q.toString()+" result";1!==q&&(H+="s"),M.textContent=H,M.classList.remove("d-none")}else M.classList.add("d-none")}}catch(C){E=!0,S=C}finally{try{!T&&x["return"]&&x["return"]()}finally{if(E)throw S}}var A=y["default"](document.querySelector(".js-card-filter-clear"),HTMLElement);A.classList.toggle("d-none",0===n.length),l(e.name,n),d(e.name,n)}}function f(e){var t=e.value.slice(0,e.selectionEnd),n=e.value.slice(e.selectionEnd),r=0===e.value.trim().length;if(T.test(t))return!1;var o=E.test(t)&&S.test(n);return r||o}function v(e){f(e)?p(e):h()}function p(e){var t=document.querySelector(".js-card-filter-suggester");if(t instanceof HTMLElement){t.classList.remove("d-none");var n=e.value.slice(0,e.selectionEnd),r=(n.match(x)||[])[0],o=y["default"](t.querySelector(".js-card-filter-suggester-helper-container"),HTMLElement),a=y["default"](o.querySelector(".js-card-filter-suggester-helper"),HTMLElement);k.test(e.value)?(a.textContent=e.value,o.classList.remove("d-none")):o.classList.add("d-none");var i=y["default"](t.querySelector(".js-card-filter-suggestions-header"),HTMLElement),u=!1,s=!0,c=!1,l=void 0;try{for(var d,m=t.querySelectorAll(".js-card-filter-suggestion")[Symbol.iterator]();!(s=(d=m.next()).done);s=!0){var f=d.value,v=f.getAttribute("data-value");v&&v.startsWith(r)?(f.classList.remove("d-none"),u=!0):(f.classList.add("d-none"),f.classList.remove("navigation-focus"))}}catch(p){c=!0,l=p}finally{try{!s&&m["return"]&&m["return"]()}finally{if(c)throw l}}i.classList.toggle("d-none",!u)}}function h(){var e=document.querySelector(".js-card-filter-suggester");e instanceof HTMLElement&&e.classList.add("d-none")}function j(e,t,n){var r={assignee:".js-card-filter-assignee",label:".js-card-filter-label"},o=r[t]+"[data-"+t+"="+n+"]",a=!0,i=!1,u=void 0;try{for(var s,c=document.querySelectorAll(o)[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value;l.setAttribute("aria-pressed",e.toString())}}catch(d){i=!0,u=d}finally{try{!a&&c["return"]&&c["return"]()}finally{if(i)throw u}}}function g(e,t){var n=y["default"](document.querySelector(".js-card-filter-input"),HTMLInputElement),r=n.value,o=e+":"+t,a=!0;r.indexOf(o)>=0?(a=!1,o=r.replace(o,"")):r.length&&(o=r.trim()+" "+o),n.value=o,j(a,e,t),m()}Object.defineProperty(e,"__esModule",{value:!0}),e.filterCards=m,e.updateSuggestionsDisplay=v,e.hideSuggestions=h,e.applyFilter=g;var y=r(n),b=["assignee","author","is","label","repo","state","status","type"],L=["assignee","label"],C=/[^\s:]+:(".*"|[^\s]*)|[^\s]+/g,T=/:"[^"]*"?$/,E=/(^|\s+)[^\s:]+$/,S=/^(\s|$)/,k=/(^|\s)[^\s:]+$/,x=/\S*$/}),define("github/magic-move",["exports","invariant"],function(e,t){function n(e){return e&&e.__esModule?e:{"default":e}}function r(){return new Promise(window.requestAnimationFrame)}function o(e){var t=new WeakMap,n=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var u=a.value;t.set(u,u.getBoundingClientRect())}}catch(s){r=!0,o=s}finally{try{!n&&i["return"]&&i["return"]()}finally{if(r)throw o}}return t}function a(e,t,n){var o,a,i,s;return regeneratorRuntime.async(function(c){for(;;)switch(c.prev=c.next){case 0:return o=t.get(e),a=n.get(e),u["default"](o&&a,"Must have old and new positions for the element to animate -- github/magic-move.js:28"),i=o.left-a.left,s=o.top-a.top,c.next=7,regeneratorRuntime.awrap(r());case 7:return e.style.transform="translateZ(0) translate("+i+"px, "+s+"px)",e.style.transition="transform 0s",c.next=11,regeneratorRuntime.awrap(r());case 11:return e.style.transform="",e.style.transition="",c.next=15,regeneratorRuntime.awrap(new Promise(function(t){return e.addEventListener("transitionend",t,{once:!0})}));case 15:return c.abrupt("return",c.sent);case 16:case"end":return c.stop()}},null,this)}function i(e,t){var n=o(e),r=[],i=!0,u=!1,s=void 0;try{for(var c,l=e[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var d=c.value;r.push(a(d,t,n))}}catch(m){u=!0,s=m}finally{try{!i&&l["return"]&&l["return"]()}finally{if(u)throw s}}return Promise.all(r)}Object.defineProperty(e,"__esModule",{value:!0}),e.recordPositions=o,e.animate=i;var u=n(t)}),define("github/project-updater",["exports","./magic-move","./typecast","./debounce","./fetch","delegated-events"],function(e,t,n,r,o,a){function i(e){return e&&e.__esModule?e:{"default":e}}function u(e){if(e){j&&clearTimeout(j);var t=p["default"](document.querySelector(".js-project-updated-message"),HTMLElement);t.textContent=e,t.classList.remove("d-none"),j=setTimeout(function(){t.textContent="",t.classList.add("d-none")},3e3)}}function s(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function c(e,t){var n="project-column-"+e.id,r=document.getElementById(n);if(r)return r;var o=document.createElement("include-fragment");return o.id=n,o.src=t+"/"+e.id,o}function l(e,t){var n="card-"+e,r=document.getElementById(n);if(r)return r;var o=document.createElement("include-fragment");return o.id=n,o.src=t+"/"+e,o.onerror=function(){o.remove()},o}function d(e,t){var n=Array.from(e.querySelectorAll(".js-project-column")),r=n.map(function(e){return e.getAttribute("data-id")}),o=t.columns.map(function(e){return String(e.id)});return o.join(",")!==r.join(",")}function m(e,t){var n=t.querySelector(".js-project-column-automation-footer");if(n){var r=p["default"](n.querySelector(".js-project-column-automation-summary"),HTMLElement);e.automation_summary&&e.purpose?(r.textContent=e.purpose,r.setAttribute("aria-label",e.automation_summary),n.classList.remove("d-none")):n.classList.add("d-none")}}function f(e,n){var r,i,f,v,h,j,g,y,b,L,C,T,E,S,k,x,w,M,q,H,A,I,_,D,P,O,R,B,F,U,K,N,W,J,$,V,X,Z,z,G,Q,Y,ee,te,ne,re,oe,ae,ie,ue,se,ce;return regeneratorRuntime.async(function(le){for(;;)switch(le.prev=le.next){case 0:if(u(n.message),r=e.querySelectorAll(".js-project-column"),i=t.recordPositions(r),f=e.getAttribute("data-url"),v=e.getAttribute("data-columns-url"),h=e.getAttribute("data-cards-url"),le.t0=n.state,le.t0){le.next=11;break}return le.next=10,regeneratorRuntime.awrap(o.fetchJSON(f));case 10:le.t0=le.sent;case 11:if(j=le.t0,a.fire(e,"will-update-project",j),g=document.activeElement,!d(e,j)){le.next=45;break}for(a.fire(e,"will-update-project-columns"),y={},b=document.createDocumentFragment(),L=!0,C=!1,T=void 0,le.prev=21,E=j.columns[Symbol.iterator]();!(L=(S=E.next()).done);L=!0)k=S.value,x=c(k,v),w=x.querySelector(".js-project-column-cards"),w&&(y[w.id]=w.scrollTop),b.appendChild(x);le.next=29;break;case 25:le.prev=25,le.t1=le["catch"](21),C=!0,T=le.t1;case 29:le.prev=29,le.prev=30,!L&&E["return"]&&E["return"]();case 32:if(le.prev=32,!C){le.next=35;break}throw T;case 35:return le.finish(32);case 36:return le.finish(29);case 37:M=e.querySelector(".js-new-project-column-container"),M&&M.remove(),s(e),e.appendChild(b),M&&e.appendChild(M);for(q in y)w=p["default"](document.getElementById(q),HTMLElement),w.scrollTop=y[q];return le.next=45,regeneratorRuntime.awrap(t.animate(r,i));case 45:H=e.querySelectorAll(".js-project-column-card"),A=t.recordPositions(H),I={},_=!0,D=!1,P=void 0,le.prev=51,O=j.columns[Symbol.iterator]();case 53:if(_=(R=O.next()).done){le.next=77;break}for(B=R.value,F=!0,U=!1,K=void 0,le.prev=58,N=B.card_ids[Symbol.iterator]();!(F=(W=N.next()).done);F=!0)J=W.value,I[J]=l(J,h);le.next=66;break;case 62:le.prev=62,le.t2=le["catch"](58),U=!0,K=le.t2;case 66:le.prev=66,le.prev=67,!F&&N["return"]&&N["return"]();case 69:if(le.prev=69,!U){le.next=72;break}throw K;case 72:return le.finish(69);case 73:return le.finish(66);case 74:_=!0,le.next=53;break;case 77:le.next=83;break;case 79:le.prev=79,le.t3=le["catch"](51),D=!0,P=le.t3;case 83:le.prev=83,le.prev=84,!_&&O["return"]&&O["return"]();case 86:if(le.prev=86,!D){le.next=89;break}throw P;case 89:return le.finish(86);case 90:return le.finish(83);case 91:$=!0,V=!1,X=void 0,le.prev=94,Z=j.columns[Symbol.iterator]();case 96:if($=(z=Z.next()).done){le.next=132;break}if(G=z.value,Q=document.getElementById("project-column-"+G.id)){le.next=101;break}return le.abrupt("return");case 101:for(Y=Q.querySelector(".js-project-column-name"),Y&&(Y.textContent=G.name,ee=Q.querySelector(".js-project-column-name-field"),ee instanceof HTMLInputElement&&(ee.value=G.name,ee.setAttribute("value",G.name))),te=Q.querySelector(".js-column-card-count"),te&&(te.textContent=G.card_ids.length),m(G,Q),ne=document.createDocumentFragment(),re=!0,oe=!1,ae=void 0,le.prev=110,ie=G.card_ids[Symbol.iterator]();!(re=(ue=ie.next()).done);re=!0)se=ue.value,ne.appendChild(I[se]);le.next=118;break;case 114:le.prev=114,le.t4=le["catch"](110),oe=!0,ae=le.t4;case 118:le.prev=118,le.prev=119,!re&&ie["return"]&&ie["return"]();case 121:if(le.prev=121,!oe){le.next=124;break}throw ae;case 124:return le.finish(121);case 125:return le.finish(118);case 126:ce=p["default"](Q.querySelector(".js-project-column-cards"),HTMLElement),s(ce),ce.appendChild(ne);case 129:$=!0,le.next=96;break;case 132:le.next=138;break;case 134:le.prev=134,le.t5=le["catch"](94),V=!0,X=le.t5;case 138:le.prev=138,le.prev=139,!$&&Z["return"]&&Z["return"]();case 141:if(le.prev=141,!V){le.next=144;break}throw X;case 144:return le.finish(141);case 145:return le.finish(138);case 146:return a.fire(e,"update-project"),le.next=149,regeneratorRuntime.awrap(t.animate(H,A));case 149:g&&document.activeElement!==g&&g.focus();case 150:case"end":return le.stop()}},null,this,[[21,25,29,37],[30,,32,36],[51,79,83,91],[58,62,66,74],[67,,69,73],[84,,86,90],[94,134,138,146],[110,114,118,126],[119,,121,125],[139,,141,145]])}function v(e){var t=!0,n=!1,r=void 0;try{for(var o,a=e.columns[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value,u=document.getElementById("project-column-"+i.id);u&&m(i,u)}}catch(s){n=!0,r=s}finally{try{!t&&a["return"]&&a["return"]()}finally{if(n)throw r}}}Object.defineProperty(e,"__esModule",{value:!0}),e.updateProject=void 0,e.displayUpdateMessage=u,e.updateProjectColumnAutomation=v;var p=i(n),h=i(r),j=void 0;e.updateProject=h["default"](f,100)}),define("github/projects/keyboard-mover",["exports","../typecast","invariant","../onfocus"],function(e,t,n,r){function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){switch(e){case" ":return"Space";case"ArrowUp":case"k":case"K":return"up";case"ArrowDown":case"j":case"J":return"down";case"ArrowLeft":case"h":case"H":return"left";case"ArrowRight":case"l":case"L":return"right";case"Enter":return"confirm";case"Escape":return"cancel";default:return e}}function c(e,t){function n(t){if(!a){var n=l["default"](t.currentTarget,HTMLElement);switch(s(t.key)){case"confirm":case"Space":if(n.classList.contains("js-redacted-project-column-card"))return;if(!n.classList.contains("js-keyboard-movable"))return;a=new h(n,e,function(){a=null}),t.preventDefault();break;case"cancel":n.blur(),t.preventDefault();break;case"up":var r=n.previousElementSibling;if(r&&r.classList.contains("js-project-column-card"))l["default"](r,HTMLElement).focus(),t.preventDefault();else{var o=n.closest(".js-project-column");o&&(l["default"](o,HTMLElement).focus(),t.preventDefault())}break;case"down":var i=n.nextElementSibling;i&&i.classList.contains("js-project-column-card")&&(l["default"](i,HTMLElement).focus(),t.preventDefault())}}}function o(e){if(!i){var n=l["default"](e.currentTarget,HTMLElement);switch(s(e.key)){case"confirm":case"Space":if(!n.classList.contains("js-keyboard-movable"))return;i=new j(n,t,function(){i=null}),e.preventDefault();break;case"cancel":n.blur(),e.preventDefault();break;case"down":var r=n.querySelector(".js-project-column-card");r&&(r.focus(),e.preventDefault());break;case"left":var o=n.previousElementSibling;o&&o.classList.contains("js-project-column")&&(l["default"](o,HTMLElement).focus(),e.preventDefault());break;case"right":var a=n.nextElementSibling;a&&a.classList.contains("js-project-column")&&(l["default"](a,HTMLElement).focus(),e.preventDefault())}}}var a=void 0,i=void 0;r.onFocus(".js-project-column-card",function(e){if(a){if(a.isMoving(e))return;a.cancel()}e.addEventListener("keydown",n),e.addEventListener("blur",function t(){a&&a.isMoving(e)||(e.removeEventListener("blur",t),e.removeEventListener("keydown",n))})}),r.onFocus(".js-project-column",function(e){if(i){if(i.isMoving(e))return;i.cancel()}e.addEventListener("keydown",o),e.addEventListener("blur",function t(){i&&i.isMoving(e)||(e.removeEventListener("blur",t),e.removeEventListener("keydown",o))})})}Object.defineProperty(e,"__esModule",{value:!0}),e.enableKeyboardMovements=c;var l=o(t),d=o(n),m=function g(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,n)}if("value"in r)return r.value;var a=r.get;return void 0===a?void 0:a.call(n)},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=!navigator.userAgent.match(/Macintosh/),p=function(){function e(t,n){u(this,e),this.item=t,this.onDone=n,this.moved=!1,this.moveInProgress=!1,this.blurring=!1,this.blurListener=this.handleBlur.bind(this),this.item.addEventListener("blur",this.blurListener),this.item.classList.add("moving")}return f(e,[{key:"handleBlur",value:function(e){!this.moveInProgress&&e.relatedTarget&&(this.blurring=!0,this.cancel())}},{key:"isMetaKeyPressed",value:function(e){return v?e.ctrlKey:e.metaKey}},{key:"inSearchColumn",value:function(){return null!=this.item.closest(".js-project-search-results")}},{key:"inPendingColumn",value:function(){return null!=this.item.closest(".js-project-pending-cards")}},{key:"findColumn",value:function(e){return e?document.querySelector('.js-project-column[data-id="'+e+'"]'):null}},{key:"findCard",value:function(e){if(!e)return null;var t=document.querySelector('.js-project-column-card[data-card-id="'+e+'"]');return t||(t=document.querySelector('.js-project-column-card[data-content-id="'+e+'"]')),t}},{key:"isColumn",value:function(e){return null!=e?e.classList.contains("js-project-column"):!1}},{key:"getColumn",value:function(){return this.item.closest(".js-project-column")}},{key:"getColumnName",value:function(){var e=this.getColumn(),t=e&&e.querySelector(".js-project-column-name");return t?t.textContent:""}},{key:"getColumnsContainer",value:function(){return l["default"](document.querySelector(".js-project-columns-container"),HTMLElement)}},{key:"getNextColumn",value:function(){var e=this.getColumn();if(e){var t=e.nextElementSibling;if(this.isColumn(t))return t}}},{key:"getPreviousColumn",value:function(){var e=this.getColumn();if(e){var t=e.previousElementSibling;if(this.isColumn(t))return t}}},{key:"getFirstColumn",value:function(){return this.getColumnsContainer().querySelector(".js-project-column")}},{key:"getLastColumn",value:function(){var e=this.getColumnsContainer().querySelectorAll(".js-project-column");return e[e.length-1]}},{key:"getCardID",value:function(e){return e?e.getAttribute("data-card-id")||e.getAttribute("data-content-id")||"":""}},{key:"getColumnID",value:function(e){return e?e.getAttribute("data-id")||"":""}},{key:"isMoving",value:function(e){return e===this.item}},{key:"updateAriaLabel",value:function(){}},{key:"moveTransaction",value:function(e){try{this.moveInProgress=!0,e(this.item),this.blurring||(this.updateAriaLabel(),this.item.focus())}finally{this.moved=!0,this.moveInProgress=!1}}},{key:"done",value:function(){this.item.removeEventListener("blur",this.blurListener),this.item.classList.remove("moving"),this.item.removeAttribute("aria-label"),this.onDone()}},{key:"cancel",value:function(){}}]),e}(),h=function(e){function t(e,n,r){u(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return o.moveCard=n,o.pendingCard=o.inPendingColumn(),o.searchCard=o.inSearchColumn(),o.columnID=o.getColumnID(o.getColumn()),o.previousCardID=o.getCardID(e.previousElementSibling),o.keydownListener=o.handleKeydown.bind(o),o.item.addEventListener("keydown",o.keydownListener),o.updateStartListener=o.handleUpdateStart.bind(o),o.getColumnsContainer().addEventListener("will-update-project",o.updateStartListener),o.updateEndListener=o.handleUpdateEnd.bind(o),o.getColumnsContainer().addEventListener("update-project",o.updateEndListener),o}return i(t,e),f(t,[{key:"updateAriaLabel",value:function(){var e=this.getCardIndex(),t=e>=0?"to position "+(e+1)+" of "+this.getCardCount():"",n="in "+this.getColumnName()+" column";this.item.setAttribute("aria-label",("Moved card "+t+" "+n).trim())}},{key:"handleUpdateStart",value:function(e){d["default"](e instanceof CustomEvent,"github/projects/keyboard-mover.js:242");var t=this.getColumn();if(!t)return void this.done();if(!this.searchCard&&!this.updatePreviousPosition(e.detail))return void this.done();var n=this.getColumnID(t);return this.isColumnInState(e.detail,n)?void(this.updateSnapshot={columnID:n,indexInColumn:this.getCardIndex()}):void this.done()}},{key:"handleUpdateEnd",value:function(){var e=this.updateSnapshot;if(this.updateSnapshot=null,!e||!this.getColumn())return void this.done();var t=this.findCard(this.getCardID(this.item)),n=this.getColumnCards(this.findColumn(e.columnID));if(t&&n){this.moveToColumn(n);var r=n.children[e.indexInColumn];t!==r&&this.moveToBeforeCard(n,r)}}},{key:"handleKeydown",value:function(e){var t=this.isMetaKeyPressed(e);switch(s(e.key)){case"up":t?this.moveToTop():this.moveUp(),e.preventDefault();break;case"down":t?this.moveToBottom():this.moveDown(),e.preventDefault();break;case"left":t?this.moveToFirstColumn(e.shiftKey):this.moveLeft(e.shiftKey),e.preventDefault();break;case"right":t?this.moveToLastColumn(e.shiftKey):this.moveRight(e.shiftKey),e.preventDefault();break;case"confirm":this.confirm(),e.preventDefault();break;case"cancel":this.cancel(),e.preventDefault()}}},{key:"updatePreviousPosition",value:function(e){if(!e||!e.columns)return!1;var t=this.getCardID(this.item),n=!0,r=!1,o=void 0;try{for(var a,i=e.columns[Symbol.iterator]();!(n=(a=i.next()).done);n=!0)for(var u=a.value,s=0;s<u.card_ids.length;s++)if(t===u.card_ids[s].toString())return this.previousCardID=u.card_ids[s-1],this.columnID=u.id,!0}catch(c){r=!0,o=c}finally{try{!n&&i["return"]&&i["return"]()}finally{if(r)throw o}}return!1}},{key:"isColumnInState",value:function(e,t){if(!e||!e.columns)return!1;var n=!0,r=!1,o=void 0;try{for(var a,i=e.columns[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var u=a.value;if(t===u.id.toString())return!0}}catch(s){r=!0,o=s}finally{try{!n&&i["return"]&&i["return"]()}finally{if(r)throw o}}return!1}},{key:"getCardIndex",value:function(){var e=this.getColumnCards(this.getColumn());return e?Array.from(e.children).indexOf(this.item):-1}},{key:"getCardCount",value:function(){var e=this.getColumnCards(this.getColumn());return e?e.querySelectorAll(".js-project-column-card").length:0}},{key:"getColumnCards",value:function(e){return null!=e?e.querySelector(".js-project-column-cards"):null}},{key:"moveToBeforeCard",value:function(e,t){this.moveTransaction(function(n){e.insertBefore(n,t)})}},{key:"moveToColumn",value:function(e){this.moveTransaction(function(t){e.appendChild(t)})}},{key:"moveUp",value:function(){var e=this.item.previousElementSibling,t=this.getColumnCards(this.getColumn());e&&t&&this.moveToBeforeCard(t,e)}},{key:"moveToTop",value:function(){var e=this.getColumnCards(this.getColumn());e&&this.moveTransaction(function(t){e.prepend(t)})}},{key:"moveDown",value:function(){var e=this.item.nextElementSibling,t=this.getColumnCards(this.getColumn());if(e&&t){var n=e.nextElementSibling;n?this.moveToBeforeCard(t,n):this.moveToBottom()}else this.moveToBottom()}},{key:"moveToBottom",value:function(){var e=this.getColumnCards(this.getColumn());e&&this.moveToColumn(e)}},{key:"moveToFirstColumn",value:function(e){var t=this.getColumnCards(this.getFirstColumn());t&&(this.moveToColumn(t),e&&this.moveToTop())}},{key:"moveToLastColumn",value:function(e){var t=this.getColumnCards(this.getLastColumn());t&&(this.moveToColumn(t),e&&this.moveToTop())}},{key:"moveLeft",value:function(e){var t=this.getColumnCards(this.inSearchColumn()?this.getLastColumn():this.getPreviousColumn());t&&(this.moveToColumn(t),e&&this.moveToTop())}},{key:"moveRight",value:function(e){var t=this.getColumnCards(this.getNextColumn());t&&(this.moveToColumn(t),e&&this.moveToTop())}},{key:"done",value:function(){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"done",this).call(this),this.item.removeEventListener("keydown",this.keydownListener),this.getColumnsContainer().removeEventListener("will-update-project",this.updateStartListener),this.getColumnsContainer().removeEventListener("update-project",this.updateEndListener)}},{key:"confirm",value:function(){if(this.moved){var e=this.findColumn(this.columnID);this.pendingCard&&!e&&(e=document.querySelector(".js-project-pending-cards-container.js-project-column")),this.moveCard(this.item,e,{keyboardMove:!0})}this.done()}},{key:"cancel",value:function(){var e=void 0,t=void 0;if(this.moved)if(this.previousCardID){var n=this.findCard(this.previousCardID);n&&(e=n.closest(".js-project-column-cards"),t=n.nextElementSibling)}else this.columnID?(e=this.getColumnCards(this.findColumn(this.columnID)),e&&(t=e.firstElementChild)):this.pendingCard?(e=document.querySelector(".js-project-column-cards.js-project-pending-cards"),e&&(t=e.firstElementChild)):this.searchCard&&(e=document.querySelector(".js-project-column-cards.js-project-search-cards"),e&&(t=e.firstElementChild));e&&(t?this.moveToBeforeCard(e,t):this.moveToColumn(e)),this.done()}}]),t}(p),j=function(e){function t(e,n,r){u(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return o.moveColumn=n,o.nextColumnID=o.getColumnID(e.nextElementSibling),o.keydownListener=o.handleKeydown.bind(o),o.item.addEventListener("keydown",o.keydownListener),o.updateListener=o.done.bind(o),o.getColumnsContainer().addEventListener("will-update-project-columns",o.updateListener),o}return i(t,e),f(t,[{key:"updateAriaLabel",value:function(){var e=this.getColumnIndex(),t=e>=0?"to position "+(e+1)+" of "+this.getColumnCount():"";this.item.setAttribute("aria-label",("Moved "+this.getColumnName()+" column "+t).trim())}},{key:"getColumnIndex",value:function(){var e=this.getColumnsContainer().querySelectorAll(".js-project-column");return Array.from(e).indexOf(this.item)}},{key:"getColumnCount",value:function(){return this.getColumnsContainer().querySelectorAll(".js-project-column").length}},{key:"handleKeydown",value:function(e){var t=this.isMetaKeyPressed(e);switch(s(e.key)){case"left":t?this.moveToFirstColumn():this.moveLeft(),e.preventDefault();break;case"right":t?this.moveToLastColumn():this.moveRight(),e.preventDefault();break;case"confirm":this.confirm(),e.preventDefault();break;case"cancel":this.cancel(),e.preventDefault()}}},{key:"insertBefore",value:function(e){var t=this.getColumnsContainer();this.moveTransaction(function(n){t.insertBefore(n,e)})}},{key:"moveLeft",value:function(){var e=this.getPreviousColumn();e&&this.insertBefore(e)}},{key:"moveRight",value:function(){var e=this.getNextColumn();if(e){var t=e.nextElementSibling;t&&this.isColumn(t)?this.insertBefore(t):this.moveToLastColumn()}else this.moveToLastColumn()}},{key:"moveToFirstColumn",value:function(){var e=this.getFirstColumn();e&&this.insertBefore(e)}},{key:"moveToLastColumn",value:function(){var e=this.getLastColumn();if(e){var t=e.nextElementSibling;t&&this.insertBefore(t)}}},{key:"done",value:function(){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"done",this).call(this),this.item.removeEventListener("keydown",this.keydownListener),this.getColumnsContainer().removeEventListener("will-update-project-columns",this.updateListener)}},{key:"confirm",value:function(){this.moved&&this.moveColumn(this.item,{keyboardMove:!0}),this.done()}},{key:"cancel",value:function(){if(this.moved){var e=this.findColumn(this.nextColumnID);e?this.insertBefore(e):this.moveToLastColumn()}this.done()}}]),t}(p)}),define("github/projects",["./throttled-input","./project-cards-filter","./form","./project-updater","./fetch","delegated-events","./query-selector","./jquery","sortablejs","./typecast","./menu","./debounce","./projects/keyboard-mover","./task-list","./facebox","./hash-change","./hotkey","invariant","selector-observer","./onfocus","./parse-html","./remote-form","./updatable-content","./sso"],function(e,t,n,r,o,a,i,u,s,c,l,d,m,f,v,p,h,j,g,y,b,L,C,T){function E(e){return e&&e.__esModule?e:{"default":e}}function S(e){return G["default"](b.parseHTML(document,e).querySelector("*"),HTMLElement)}function k(e,t){var n=G["default"](e.elements.namedItem("card_id"),HTMLInputElement),r=G["default"](e.elements.namedItem("content_id"),HTMLInputElement),o=G["default"](e.elements.namedItem("content_type"),HTMLInputElement);if(!t)return n.value="",r.value="",void(o.value="");var a=t.getAttribute("data-card-id");a?(n.value=a,r.value="",o.value=""):(n.value="",r.value=t.getAttribute("data-content-id")||"",o.value=t.getAttribute("data-content-type")||""),G["default"](e.elements.namedItem("client_uid"),HTMLInputElement).value=oe}function x(e,t){var n=G["default"](e.querySelector(".js-column-card-count"),HTMLElement),r=parseInt(n.textContent.trim()),o=r+t;n.textContent=o.toString()}function w(e,t){var n=G["default"](e.elements.namedItem("keyboard_move"),HTMLInputElement);t&&t.keyboardMove===!0?n.value="true":n.value=""}function M(e,t,r){var o=e.closest(".js-project-column");if(o){x(o,1),t&&(I(t),x(t,-1)),_();var a=G["default"](o.querySelector(".js-project-content-form"),HTMLFormElement);a.reset(),k(a,e);var i=e.previousElementSibling,u=G["default"](a.elements.namedItem("previous_card_id"),HTMLInputElement);i?u.value=i.getAttribute("data-card-id")||"":u.value="",w(a,r),n.submit(a)}}function q(e){var t=e.item;if(!t.closest(".js-project-triage-pane")){var n=e.from&&e.from.closest(".js-project-column");M(t,n),t.hasAttribute("tabindex")&&G["default"](t,HTMLElement).focus()}}function H(e,t){var r=G["default"](document.querySelector(".js-reorder-columns-form"),HTMLFormElement);G["default"](r.elements.namedItem("column_id"),HTMLInputElement).value=e.getAttribute("data-id")||"";var o=e.previousElementSibling;o&&(G["default"](r.elements.namedItem("previous_column_id"),HTMLInputElement).value=o.getAttribute("data-id")||""),w(r,t),n.submit(r)}function A(e){var t=e.item;H(t),t.hasAttribute("tabindex")&&G["default"](t,HTMLElement).focus()}function I(e){e.classList.contains("js-project-pending-cards-container")&&0===e.querySelectorAll(".js-project-column-card").length&&e.remove()}function _(){var e=document.querySelector(".js-search-cards-next-page");if(e instanceof HTMLInputElement){var t=null==document.querySelector(".js-project-search-cards .js-project-column-card");t&&(e.value="1")}}function D(e){return e.responseJSON&&"note_already_converted_to_issue"===e.responseJSON.error_code}function P(e){"Escape"===e.key&&(l.deactivate(e.currentTarget),e.preventDefault(),e.stopImmediatePropagation())}function O(e,t){var n=document.querySelector(e);n&&n.classList.toggle("d-none",!t)}function R(){var e=document.querySelector(".js-project-activity-results");if(e){var t=e.getAttribute("data-project-activity-url");ne["default"](t,"`data-project-activity-url` must exist -- github/projects.js:344");var n=new URL(t,window.location.origin);e.setAttribute("src",n.toString())}}function B(e,t){var r=G["default"](e.currentTarget.closest(".js-project-triage-pane"),HTMLElement),o=G["default"](r.querySelector(".js-project-search-form"),HTMLFormElement);G["default"](o.querySelector(".js-show-triage-field"),HTMLInputElement).value=t?"show":"",n.submit(o)}function F(){var e=document.querySelectorAll(".js-project-search-cards .js-project-column-card"),t={},n=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var u=a.value,s=u.getAttribute("data-content-id");s&&(t.hasOwnProperty(s)&&u.remove(),t[s]=!0)}}catch(c){r=!0,o=c}finally{try{!n&&i["return"]&&i["return"]()}finally{if(r)throw o}}}function U(e){var t=e.closest(".js-details-container");t&&t.classList.remove("open")}function K(e){"Escape"===te["default"](e)&&U(e.currentTarget);
}function N(e){var t=e.closest(".js-project-column");if(t){var r=e.value;if(e.setAttribute("data-preview-text",r),/(gh-|issues\/|pull\/|#)\d+/.test(r)){var o=G["default"](t.querySelector(".js-preview-note-form"),HTMLFormElement);G["default"](o.elements.namedItem("note"),HTMLInputElement).value=r,n.submit(o)}else G["default"](t.querySelector(".js-note-preview"),HTMLElement).innerHTML=""}}function W(e){var t,n,r,a,i,u;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.getAttribute("data-results-url")||"",n=G["default"](e.closest(".js-select-menu"),HTMLElement),n.classList.add("is-sending"),r=n.querySelector(".js-select-menu-tab.selected"),a=r?"&search_in="+(r.getAttribute("data-search-in")||""):"",s.next=7,regeneratorRuntime.awrap(o.fetchText(t+"?query="+e.value+a));case 7:i=s.sent,n.classList.remove("is-sending"),u=G["default"](n.querySelector(".js-project-repository-picker-results"),HTMLElement),u.innerHTML=i,u.style.display="block";case 12:case"end":return s.stop()}},null,this)}function J(e,t){var n=e.querySelector(".js-project-column-cards");ne["default"](n,"github/projects.js:611"),n.prepend(t),x(e,1)}function $(e,t){var n=t.querySelector("*"),r=n&&n.classList.contains("js-note-form-container")?!0:!1;if(r){var o=e.closest(".js-note-form-container");ne["default"](o,"github/projects.js:622"),o.replaceWith(t)}else{var i=e.getAttribute("data-card-id")||"",u=document.getElementById("card-"+i);u&&u.replaceWith(t),a.fire(document,"facebox:close")}}function V(e){f.enableTaskList(e);var t=i.query(e,".js-task-list-field",HTMLTextAreaElement);t.defaultValue=t.value;var n=!0,r=!1,o=void 0;try{for(var a,u=i.querySelectorAll(e,".task-list-item-checkbox",HTMLInputElement)[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;s.defaultChecked=s.checked}}catch(c){r=!0,o=c}finally{try{!n&&u["return"]&&u["return"]()}finally{if(r)throw o}}}function X(e){function t(e){s.disabled=e,u.classList.toggle("d-none",!e),n.changeValue(c,!e)}var r=document.querySelector("#facebox .js-project-column-automation");if(r){var a=G["default"](r.closest(".js-column-settings-form"),HTMLElement),i=G["default"](r.querySelector(".js-project-automation-options"),HTMLElement),u=G["default"](a.querySelector(".js-project-autmoation-loader"),HTMLElement),s=G["default"](a.querySelector(".js-column-purpose-button"),HTMLButtonElement),c=G["default"](a.querySelector(".js-column-purpose-value:checked"),HTMLInputElement),l=r.getAttribute("data-src");ne["default"](l,"github/projects.js:718");var d=r.getAttribute("data-id")||"",m=l+"?id="+d;null!=e&&(m+="&purpose="+e),i.innerHTML="",t(!0),o.fetchSafeDocumentFragment(document,m).then(function(e){i.appendChild(e),t(!1)})["catch"](function(){t(!1)})}}var Z=E(u),z=E(s),G=E(c),Q=E(d),Y=E(v),ee=E(p),te=E(h),ne=E(j),re=E(T),oe=void 0,ae=document.querySelector(".js-client-uid");ae&&(oe=ae.getAttribute("data-uid")||""),a.on("card:testAction",".js-project-column-card",function(e){q({item:e.currentTarget})}),a.on("column:testAction",".js-project-column",function(e){A({item:e.currentTarget})}),Z["default"](document).on("ajaxSuccess",".js-project-update-card",function(e,t,n,r){var o=S(r),a=o.getAttribute("data-card-id")||"",i=void 0;if(a&&(i=document.querySelector('[data-card-id="'+a+'"]')),!i){var u=o.getAttribute("data-content-type")||"",s=o.getAttribute("data-content-id")||"";i=document.querySelector('[data-content-type="'+u+'"][data-content-id="'+s+'"]')}var c=i&&i===i.ownerDocument.activeElement?!0:!1;Z["default"](i).replaceWith(o),c&&o.focus()}),Z["default"](document).on("ajaxSuccess",".js-convert-note-to-issue-form",function(){a.fire(document,"facebox:close")}),Z["default"](document).on("ajaxError",".js-convert-note-to-issue-form",function(e,t){D(t)&&e.preventDefault()}),Z["default"](document).on("ajaxComplete",".js-convert-note-to-issue-form",function(e,t){D(t)&&(e.currentTarget.querySelector(".js-convert-note-error-container").innerHTML=t.responseJSON.error_html)}),g.observe(".js-convert-note-to-issue-form .js-menu-container, .js-menu-container.js-column-purpose-selector",{add:function(e){e.addEventListener("keydown",P)},remove:function(e){e.removeEventListener("keydown",P)}}),a.on("click",".js-add-project-description",function(){Y["default"]({div:"#edit-project"}).then(function(e){G["default"](e.querySelector("#edit-project-name"),HTMLElement).removeAttribute("autofocus"),G["default"](e.querySelector("#edit-project-body"),HTMLElement).setAttribute("autofocus","")})}),Z["default"](document).on("ajaxSuccess",".js-create-project-column",function(e,t,n,r){var o=S(r),i=o.classList.contains("js-column-form-container");if(i)e.currentTarget.closest(".js-column-form-container").replaceWith(o),X();else{var u=G["default"](document.querySelector(".js-new-project-column-container"),HTMLElement);u.insertAdjacentHTML("beforebegin",r),a.fire(document,"facebox:close")}}),Z["default"](document).on("ajaxSuccess",".js-update-project-column",function(e,t,n,r){var o=S(r),i=o.classList.contains("js-column-form-container");if(i)e.currentTarget.closest(".js-column-form-container").replaceWith(o),X();else{var u=e.currentTarget.getAttribute("data-column-id"),s=document.querySelector('.js-project-column[data-id="'+u+'"]');s.replaceWith(o),a.fire(document,"facebox:close")}}),Z["default"](document).on("ajaxSuccess",".js-delete-project-column",function(e){var t=e.currentTarget.getAttribute("data-column-id");if(!t)throw new Error("Unable to get attribute `data-column-id`");G["default"](document.querySelector('.js-project-column[data-id="'+t+'"]'),HTMLElement).remove(),a.fire(document,"facebox:close")}),g.observe(".js-project-column-card",function(e){e.id===document.location.hash.substr(1)&&setTimeout(function(){G["default"](e,HTMLElement).focus()},1)}),Z["default"](document).on("ajaxSuccess",".js-delete-card",function(e){var t=e.currentTarget.closest(".js-project-column");t&&x(t,-1);var r=e.currentTarget.closest(".js-project-triage-pane");e.currentTarget.closest(".js-project-column-card").remove(),r&&n.submit(r.querySelector(".js-project-search-form"))}),a.on("click",".js-card-link-fallback",function(e){l.deactivate(e.currentTarget.closest(".js-menu-container"))}),ee["default"](function(e){var t=e.target;t&&t.matches(".js-project-column-card")&&G["default"](t,HTMLElement).focus()}),a.on("click",".js-show-project-triage",function(){O(".js-project-menu-pane",!0),O(".js-project-triage-pane",!0);var e=G["default"](document.querySelector(".js-project-triage-pane"),HTMLElement);e.addEventListener("animationend",function(){G["default"](e.querySelector(".js-project-triage-search-text"),HTMLInputElement).focus()},{once:!0})}),a.on("click",".js-show-project-menu",function(){R(),O(".js-project-menu-pane",!0),O(".js-project-triage-pane",!1)}),a.on("click",".js-hide-project-menu",function(){O(".js-project-menu-pane",!1),O(".js-project-triage-pane",!1)}),a.on("click",".js-show-triage",function(e){B(e,!0)}),a.on("click",".js-hide-triage",function(e){B(e,!1)}),Z["default"](document).on("ajaxSuccess",".js-project-search-form",function(e,t,n,r){var o=e.currentTarget.closest(".js-project-triage-pane");o.querySelector(".js-project-search-results").innerHTML=r}),Z["default"](document).on("ajaxSuccess",".js-project-activity-form",function(e,t,n,r){var o=e.currentTarget.closest(".js-project-activity-pane"),a=o.querySelector(".js-project-activity-container");a&&(ne["default"](a instanceof HTMLElement,"github/projects.js:400"),a.innerHTML=r),o&&(ne["default"](o instanceof HTMLElement,"github/projects.js:405"),o.classList.remove("Details--on"))}),g.observe(".js-project-column-card",function(e){if(e.getAttribute("data-card-id")){var t=e.getAttribute("data-content-type"),n=e.getAttribute("data-content-id"),r=document.getElementById("card-"+t+"-"+n);r&&r.remove()}}),g.observe(".js-more-search-cards-form",{add:function(e){e.addEventListener("page:loaded",F)},remove:function(e){e.removeEventListener("page:loaded",F)}}),a.on("click",".js-dismiss-note-form-button",function(e){U(e.currentTarget)}),y.onFocus(".js-note-text",function(t){var n=G["default"](t,HTMLTextAreaElement),r=N.bind(null,n);e.addThrottledInputEventListener(n,r),n.addEventListener("blur",function(){e.removeThrottledInputEventListener(n,r)},{once:!0})}),g.observe(".js-project-note-form",{add:function(e){e.addEventListener("keyup",K)},remove:function(e){e.removeEventListener("keyup",K)}}),L.remoteForm(".js-preview-note-form",function(e,t){var n,r,o,a,i;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return n=G["default"](e.closest(".js-project-column"),HTMLElement),r=G["default"](n.querySelector(".js-note-text"),HTMLTextAreaElement),o=G["default"](n.querySelector(".js-note-preview"),HTMLElement),a=void 0,u.prev=4,u.next=7,regeneratorRuntime.awrap(t.html());case 7:i=u.sent,a=i.html,u.next=13;break;case 11:u.prev=11,u.t0=u["catch"](4);case 13:o.innerHTML="",a&&r.getAttribute("data-preview-text")===r.value&&o.appendChild(a);case 15:case"end":return u.stop()}},null,this,[[4,11]])}),y.onFocus(".js-project-repository-picker-field",function(t){var n=G["default"](t,HTMLInputElement),r=W.bind(null,n);e.addThrottledInputEventListener(n,r),n.addEventListener("blur",function(){e.removeThrottledInputEventListener(n,r)},{once:!0})}),g.observe("#facebox .js-project-repository-picker-field",function(e){var t=G["default"](e,HTMLInputElement);W(t)}),a.on("click",".js-project-repository-picker-tabs .js-select-menu-tab",function(e){var t=G["default"](e.currentTarget.closest(".js-select-menu-deferred-content"),HTMLElement),n=G["default"](t.querySelector(".js-project-repository-picker-field"),HTMLInputElement);W(n)}),L.remoteForm(".js-project-note-form",function(e,t){var r,o,a,i,u,s,c;return regeneratorRuntime.async(function(l){for(;;)switch(l.prev=l.next){case 0:return r=G["default"](e.querySelector("textarea"),HTMLTextAreaElement),r.disabled=!0,o=G["default"](e.querySelector("button"),HTMLButtonElement),o.disabled=!0,a=e.closest(".js-project-column"),a&&(i=G["default"](a.querySelector(".js-note-text"),HTMLElement),i.removeAttribute("data-preview-text")),u=void 0,l.prev=7,l.next=10,regeneratorRuntime.awrap(t.html());case 10:u=l.sent,l.next=22;break;case 13:return l.prev=13,l.t0=l["catch"](7),u=l.t0.response,a&&u&&u.html&&409===u.status&&(s=G["default"](a.querySelector(".js-note-preview"),HTMLElement),s.innerHTML="",s.appendChild(u.html)),o.disabled=!1,r.blur(),r.disabled=!1,r.focus(),l.abrupt("return");case 22:a?(c=G["default"](a.querySelector(".js-note-preview"),HTMLElement),c.innerHTML="",J(a,u.html)):$(e,u.html),r.blur(),r.disabled=!1,n.changeValue(r,""),r.focus();case 27:case"end":return l.stop()}},null,this,[[7,13]])}),L.remoteForm(".js-project-column-card .js-comment-update",function(e,t,n){var o,a,u,s,c,l,d;return regeneratorRuntime.async(function(m){for(;;)switch(m.prev=m.next){case 0:return o=G["default"](e.closest(".js-task-list-container"),HTMLElement),a=G["default"](e.closest(".js-project-column-card"),HTMLElement),u=e.getAttribute("data-note-version")||"",n.headers.set("X-Note-Version",u),s=void 0,m.prev=5,m.next=8,regeneratorRuntime.awrap(t.json());case 8:s=m.sent,m.next=22;break;case 11:if(m.prev=11,m.t0=m["catch"](5),s=m.t0.response,!s||422!==s.status||!s.json.stale){m.next=21;break}return r.displayUpdateMessage(s.json.message),V(o),C.updateContent(a),m.abrupt("return");case 21:throw m.t0;case 22:e.setAttribute("data-note-version",s.json.note_version),c=s.json.note,l=i.query(o,".js-task-list-field",HTMLTextAreaElement),l.value=c,d=i.query(a,".js-edit-note-input",HTMLTextAreaElement),d.textContent=c,V(o);case 29:case"end":return m.stop()}},null,this,[[5,11]])});var ie=Q["default"](t.filterCards,1);a.on("click",".js-card-filter-clear",function(){var e=G["default"](document.querySelector(".js-card-filter-input"),HTMLInputElement);e.value="",a.fire(e,"input")}),document.addEventListener("facebox:reveal",function(){X()}),a.on("click",".js-column-purpose-selector .js-navigation-item",function(e){var t=G["default"](e.currentTarget.querySelector(".js-column-purpose-value"),HTMLInputElement);X(t.value)}),a.on("menu:activate",".js-column-purpose-selector",function(e){var t=G["default"](e.currentTarget.querySelector(".js-column-purpose-button"),HTMLButtonElement);t.disabled&&e.preventDefault()}),g.observe(".js-project-column-card",{add:ie,remove:ie}),g.observe(".js-card-filter-input",function(n){n.addEventListener("input",Q["default"](t.filterCards,500)),e.addThrottledInputEventListener(n,function(){t.updateSuggestionsDisplay(n)})}),a.on("focusin",".js-card-filter-input",function(e){e.currentTarget instanceof HTMLInputElement&&t.updateSuggestionsDisplay(e.currentTarget)}),a.on("focusout:delay",".js-card-filter-input",function(){t.hideSuggestions()}),a.on("click",".js-card-filter-suggestion",function(){var e=G["default"](document.querySelector(".js-card-filter-input"),HTMLInputElement);e.focus()}),a.on("click",".js-card-filter-assignee",function(e){var n=e.currentTarget.getAttribute("data-assignee");n&&t.applyFilter("assignee",n)}),a.on("click",".js-card-filter-label",function(e){var n=e.currentTarget.getAttribute("data-label");n&&((n.indexOf(" ")>=0||n.indexOf(":")>=0)&&(n='"'+n+'"'),t.applyFilter("label",n))}),a.on("navigation:keydown",".js-card-filter-suggester",function(e){switch(ne["default"](e instanceof CustomEvent,"github/projects.js:798"),te["default"](e.detail.originalEvent)){case"Escape":e.preventDefault(),t.hideSuggestions();break;case"ArrowLeft":case"ArrowRight":case"Enter":t.hideSuggestions()}}),a.on("navigation:open",".js-card-filter-suggester",function(e){var n=document.querySelector(".js-card-filter-input");if(n instanceof HTMLInputElement){var r=G["default"](document.querySelector(".js-card-filter-suggester"),HTMLElement),o=e.target.getAttribute("data-value")||"",i=n.value.slice(0,n.selectionEnd).replace(/\S+$/,""),u=n.value.slice(n.selectionEnd);r.classList.contains("d-none")||(e.preventDefault(),n.value=i+o+u,a.fire(n,"input"),t.updateSuggestionsDisplay(n)),t.hideSuggestions()}}),a.on("socket:message",".js-project-columns-container",function(e){ne["default"](e instanceof CustomEvent,"github/projects.js:839");var t=e.detail.data;if(oe!==t.client_uid){var o=e.currentTarget;re["default"]().then(function(){r.updateProject(o,t)});var a=document.querySelector(".js-project-search-form");a&&n.submit(G["default"](a,HTMLFormElement))}else"column_automation_updated"===t.action&&null!=t.state&&r.updateProjectColumnAutomation(t.state)}),document.addEventListener("socket:message",function(e){ne["default"](e instanceof CustomEvent,"github/projects.js:862");var t=e.detail.data;if(t&&t.is_project_activity){var n=document.querySelector(".js-project-activity-pane");n&&n.classList.add("Details--on")}}),g.observe(".js-project-columns-drag-container",function(e){z["default"].create(e,{animation:150,draggable:".js-project-column",filter:".js-note-text, .js-redacted-project-column-card",preventOnFilter:!1,handleReplacedDragElement:!0,group:"project-column",onUpdate:A})}),g.observe(".js-card-drag-container",function(e){z["default"].create(e,{animation:150,draggable:".js-project-column-card",filter:".js-redacted-project-column-card",preventOnFilter:!1,handleReplacedDragElement:!0,group:"project-card",onAdd:q,onUpdate:q})}),g.observe(".js-project-search-results-drag-container",function(e){z["default"].create(e,{sort:!1,animation:150,draggable:".js-project-column-card",group:{name:"project-card",put:!1,pull:!0},onAdd:q,onUpdate:q})}),g.observe(".js-project-column-card",function(e){if(e.getAttribute("data-card-id")){var t=e.getAttribute("data-content-type"),n=e.getAttribute("data-content-id"),r=document.getElementById("card-"+t+"-"+n);r&&r.remove()}}),g.observe(".js-client-uid-field",function(e){e.value=oe}),a.on("toggle",".js-project-card-build-status .js-dropdown-details",function(e){function t(){o.open||r()}function n(e){a.contains(e.target)||r()}function r(){o.removeAttribute("open"),a.classList.add("d-none"),o.appendChild(a),o.removeEventListener("toggle",t),window.removeEventListener("scroll",n)}var o=e.currentTarget,a=o.querySelector(".js-card-status-dropdown-menu");if(a){var i=G["default"](document.body,HTMLElement);o.addEventListener("toggle",t),window.addEventListener("scroll",n,{capture:!0,passive:!0}),a.classList.remove("d-none"),G["default"](a.querySelector(".js-details-container"),HTMLElement).classList.add("open"),i.appendChild(a);var u=i.getBoundingClientRect().height,s=a.getBoundingClientRect(),c=o.getBoundingClientRect(),l=c.top;l+s.height+10>=u&&(l=Math.max(u-s.height-10,0));var d=c.right;null!=o.closest(".js-project-triage-pane")&&(d=Math.max(c.left-s.width-10,0)),a.style.top=l+"px",a.style.left=d+"px",a.style.right="auto"}},{capture:!0}),m.enableKeyboardMovements(M,H)}),ghImport("github/projects")["catch"](function(e){setTimeout(function(){throw e})});
